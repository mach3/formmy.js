/*!
 *
 * Formmy.js
 * ---------
 * Front form validation interface
 *
 * @version 0.1.0
 * @license MIT
 * @author mach3<http://github.com/mach3>
 * @url http://github.com/mach3/formmy.js
 *
 */

!function(){$._format=function(){var a=Array.prototype.slice.call(arguments);return a.shift().replace(/%s/g,function(){return a.length?a.shift():""})},$._toString=function(a){return void 0===a||null===a?"":a.toString()},$.fn.serializeObject=function(){var a={};return $.each(this.serializeArray(),function(b,c){return void 0!==a[c.name]?("array"!==$.type(a[c.name])&&(a[c.name]=[a[c.name]]),void a[c.name].push(c.value)):void(a[c.name]=c.value)}),a}}(),function(a){var b=function(){this.init.apply(this,arguments)};!function(){var c=b.prototype;c.EVENT_ERROR="formmyError",c.EVENT_SUBMIT="formmySubmit",c.defaults={keyValidation:"validation",keyFor:"for",defaultMessage:"Invalid Input",animateMessage:!0,animateMessageDuration:300,classMessage:"message",classMessageError:"message-error",classMessageEmpty:"message-empty",classMessageValid:"message-valid",classValid:"valid",classInvalid:"invalid",validateOnBlur:!1,validateOnChange:!0,validateOnSubmit:!0,submitOnValid:!1,submitJSON:!0},c.options=null,c.messages=null,c.rules=null,c.errors=null,c.$el=null,c.el=null,c.fields=null,c.init=function(b,c,d){var e;this.delegate(),this.config(c),this.messages=d||{},e=this.config(),this.$el=a(b),this.el=this.$el.get(0),this.fields=this.$el.find("input[name], select[name], textarea[name]"),this.initRules(),e.validateOnBlur&&this.fields.on("blur",this._onAction),e.validateOnChange&&this.fields.on("change",this._onAction),this.$el.on("submit",this._onSubmit)},c.delegate=function(){var b=this;return a.each(this,function(c,d){a.isFunction(d)&&/^_/.test(c)&&(b[c]=a.proxy(d,b))}),this},c.config=function(b){return this.options||(this.options=a.extend(!0,{},this.defaults)),void 0===b?this.options:(this.options=a.extend(!0,this.options,b),this)},c.initRules=function(){var a,b;return a=this,b={},this.fields.each(function(){this.name in b||(b[this.name]=a.parseRule(this))}),this.rules=b,this},c.parseRule=function(b){var c,d;return c=a(b),d=c.data(this.config().keyValidation),rules={required:!1,items:[]},!!d&&d.replace(/(\w+)(?:\((.+?)\))?/g,function(b,c,d){var e=[];return"require"===c?void(rules.required=!0):(d&&a.each(d.split(","),function(b,c){c=a.trim(c),c=/^[\d]+$/.test(c)?parseInt(c,10):c,e.push(c)}),void rules.items.push({name:c,args:e}))}),rules},c.validateAll=function(a){var b,c;return c=[],b=this,this.fields.each(function(){var d=b.validate(this);d&&(c.push({name:this.name,error:d}),a&&b.toggleMessage(this,d))}),this.errors=c,!c.length},c.validate=function(c){var d,e,f,g,h,i;return d=this,e=c.name,f=this.$el.serializeObject(),g=!1,h=this.rules[e],i=f[e],h?i?(a.each(h.items,function(c,h){var j=h.args.slice();return j=a.map(j,function(a){return/^__.+?__$/.test(a)&&(a=a.replace(/(^__|__$)/g,""),a=f[a]),a}),j=[i].concat(j),b.valid._call(h.name,j)?void 0:(g=d.getMessage(e,h.name),!1)}),g):h.required?this.getMessage(e,"require"):null:null},c.getMessage=function(a,b){return this.messages[a]&&this.messages[a][b]?this.messages[a][b]:this.config().defaultMessage},c.toggleMessage=function(b,c){var d,e,f,g;e=a(b),d=this.config(),f=this.getMessageNode(b),g=f.attr("class"),f.toggleClass(d.classMessageValid,c===!1).toggleClass(d.classMessageEmpty,null===c).toggleClass(d.classMessageError,!!c).text(c===!1?"":a._toString(c)),g=g!==f.attr("class"),e.toggleClass(d.classInvalid,!!c).toggleClass(d.classValid,!c),d.animateMessage&&g&&f.hide().fadeIn(d.animateMessageDuration)},c.getMessageNode=function(b){var c,d;return c=this.config(),d=this.$el.find("."+c.classMessage).filter(function(){return a(this).data(c.keyFor)===b.name}),d.length||(d=a("<span>").addClass(c.classMessage).data(c.keyFor,b.name).insertAfter(b)),d},c.serialize=function(){return this.$el.serializeObject()},c.request=function(){this.$el.clone().submit()},c.ajax=function(){var b=this.config();return a.ajax({url:this.$el.prop("action"),type:this.$el.prop("method"),data:{data:b.submitJSON?JSON.stringify(this.serialize()):this.serialize()}})},c._onAction=function(a){var b=a.currentTarget;this.toggleMessage(b,this.validate(b))},c._onSubmit=function(a){var b=this.validateAll(!0);return b&&this.config().submitOnValid?!0:(a.preventDefault(),void this.$el.trigger(b?this.EVENT_SUBMIT:this.EVENT_ERROR))}}(),a.Formmy=b,a.Formmy.instanceName="formmyInstance",a.fn.formmy=function(b,c){var d=a.Formmy.instanceName;return this.each(function(){var e=a(this);e.data(d)||e.data(d,new a.Formmy(this,b,c))}),this},a.fn.getFormmy=function(){return this.data(a.Formmy.instanceName)}}(jQuery,this),function(a){var b={alpha:function(a){return/^[a-zA-Z]*?$/.test(a)},alphaDash:function(a){return/^[\w\-]*?$/.test(a)},alphaNumeric:function(a){return/^[a-zA-Z0-9]*?$/.test(a)},colorHex:function(a){return/^#?[0-9a-f]{3}([0-9a-f]{3})?$/i.test(a)},creditCard:function(a){return/^[13456][\d]{13,15}$/.test(a)},date:function(a,b){return b=b||"^\\d{4}/\\d{1,2}/\\d{1,2}$",this.regex(a,b)},decimal:function(a,b,c){var d,e,f;return d=b?"{"+parseInt(b,10)+"}":"+",e=c?"{"+parseInt(c,10)+"}":"+",f="^[\\d]"+e+"(.[\\d]"+d+")?$",this.regex(a,f)},digit:function(a){return/^\d+$/.test(a)},email:function(b){var c,d,e,f;return c="[a-zA-Z0-9!#\\$%&`\\+\\-\\*\\/â€™\\^\\{\\}_]",d="[a-zA-Z0-9\\-]",e="^%s+(\\.%s+)*?@%s+(\\.%s+)*?$",f=a._format(e,c,c,d,d),this.regex(b,f)},equals:function(a,b){return a===b},exactLength:function(a,b){return a.length===b},matches:function(a,b,c){return a===c[b]},maxLength:function(a,b){return a.length<=b},minLength:function(a,b){return a.length>=b},notEmpty:function(b){return!!a._toString(b)},numeric:function(a){return/^(\-|\+)?\d+(\.\d+)?$/.test(a)},phone:function(b,c,d){return b=a._toString(b).replace(/[^\d]/g,""),c=c||10,d=d||11,this.rangeLength(b,c,d)},length:function(a,b,c){return this.minLength(a,b)&&this.maxLength(a,c)},range:function(a,b,c){return a=new Number(a),a>=b&&c>=a},regex:function(a,b){return b=new RegExp(b),b.test(a)},url:function(b){var c,d,e,f,g;return c="(https|http)://",d="(\\d{1,3}(\\.\\d{1,3}){3})",e="([a-z0-9\\-]+(\\.[a-z0-9\\-]+)*?)",f="(:[\\d]{1,5})",g="[^\\\\'\\|`\\^\"<>\\(\\)\\{\\}\\[\\]]+",this.regex(b,a._format("^%s(%s|%s)(%s)?(%s)?$",c,d,e,f,g))},_call:function(b,c){return a.isFunction(this[b])?this[b].apply(this,c):null},_add:function(b,c,d){return d=d||!1,this.hasOwnProperty(b)&&!d||/^_/.test(b)||!a.isFunction(c)?!1:(this[b]=c,!0)}};a.extend(a.Formmy,{valid:b})}(jQuery);
//# sourceMappingURL=formmy.dev.js.map