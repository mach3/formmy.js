/*!
 *
 * Formmy.js
 * ---------
 * Front form validation interface
 *
 * @version 0.1.1 (2015-04-25)
 * @license MIT
 * @author mach3<http://github.com/mach3>
 * @url http://github.com/mach3/formmy.js
 *
 */
!function(){$._format=function(){var a=Array.prototype.slice.call(arguments);return a.shift().replace(/%s/g,function(){return a.length?a.shift():""})},$._toString=function(a){return void 0===a||null===a?"":a.toString()},$.fn.serializeObject=function(){var a={};return $.each(this.serializeArray(),function(b,c){return void 0!==a[c.name]?("array"!==$.type(a[c.name])&&(a[c.name]=[a[c.name]]),void a[c.name].push(c.value)):void(a[c.name]=c.value)}),a}}(),function(a){var b=function(){this.init.apply(this,arguments)};!function(){var c=b.prototype;c.EVENT_ERROR="formmyError",c.EVENT_SUBMIT="formmySubmit",c.defaults={keyValidation:"validation",keyFilter:"filter",keyFor:"for",defaultMessage:"Invalid Input",animateMessage:!0,animateMessageDuration:300,classMessage:"message",classMessageError:"message-error",classMessageEmpty:"message-empty",classMessageValid:"message-valid",classValid:"valid",classInvalid:"invalid",validateOnBlur:!1,validateOnChange:!0,validateOnSubmit:!0,submitOnValid:!1,submitJSON:!0},c.options=null,c.messages=null,c.rules=null,c.filters=null,c.errors=null,c.$el=null,c.el=null,c.fields=null,c.init=function(b,c,d){var e;this.delegate(),this.config(c),this.messages=d||{},e=this.config(),this.$el=a(b),this.el=this.$el.get(0),this.fields=this.$el.find("input[name], select[name], textarea[name]"),this.initRules(),e.validateOnBlur&&this.fields.on("blur",this._onAction),e.validateOnChange&&this.fields.on("change",this._onAction),this.$el.on("submit",this._onSubmit)},c.delegate=function(){var b=this;return a.each(this,function(c,d){a.isFunction(d)&&/^_/.test(c)&&(b[c]=a.proxy(d,b))}),this},c.config=function(b){return this.options||(this.options=a.extend(!0,{},this.defaults)),void 0===b?this.options:(this.options=a.extend(!0,this.options,b),this)},c.initRules=function(){var a,b;return a=this,b={},filters={},this.fields.each(function(){this.name in b||(b[this.name]=a.parseRule(this)),this.name in filters||(filters[this.name]=a.parseFilter(this))}),this.rules=b,this.filters=filters,this},c.parseRule=function(b){var c,d,e;return c=a(b),e=c.data(this.config().keyValidation),d={required:!1,items:[]},!!e&&e.replace(/(\w+)(?:\((.+?)\))?/g,function(b,c,e){var f=[];return"require"===c?void(d.required=!0):(e&&a.each(e.split(","),function(b,c){c=a.trim(c),c=/^[\d]+$/.test(c)?parseInt(c,10):c,f.push(c)}),void d.items.push({name:c,args:f}))}),d},c.parseFilter=function(b){var c,d,e;return c=a(b),d=[],e=c.data("filter"),!!e&&e.replace(/(\w+)(?:\((.+?)\))?/g,function(b,c,e){var f=[];e&&a.each(e.split(","),function(b,c){c=a.trim(c),c=/^[\d]+$/.test(c)?parseInt(c,10):c,f.push(c)}),d.push({name:c,args:f})}),d},c.validateAll=function(a){var b,c;return c=[],b=this,this.fields.each(function(){var d=b.validate(this);d&&(c.push({name:this.name,error:d}),a&&b.toggleMessage(this,d))}),this.errors=c,!c.length},c.validate=function(c){var d,e,f,g,h,i;return this.filter(c),d=this,e=c.name,f=this.$el.serializeObject(),g=!1,h=this.rules[e],i=f[e],h?i?(a.each(h.items,function(c,h){var j=h.args.slice();return j=a.map(j,function(a){return/^__.+?__$/.test(a)&&(a=a.replace(/(^__|__$)/g,""),a=f[a]),a}),j=[i].concat(j),b.valid._call(h.name,j)?void 0:(g=d.getMessage(e,h.name),!1)}),g):h.required?this.getMessage(e,"require"):null:null},c.filter=function(b){var c,d;c=b.value,d=this.filters[b.name],d&&(a.each(d,function(b,d){var e,f;e=[c].concat(d.args),f=a.Formmy.filter[d.name],a.isFunction(f)&&(c=f.apply(a.Formmy.filter,e))}),b.value=c)},c.getMessage=function(a,b){return this.messages[a]&&this.messages[a][b]?this.messages[a][b]:this.config().defaultMessage},c.toggleMessage=function(b,c){var d,e,f,g;e=a(b),d=this.config(),f=this.getMessageNode(b),g=f.attr("class"),f.toggleClass(d.classMessageValid,c===!1).toggleClass(d.classMessageEmpty,null===c).toggleClass(d.classMessageError,!!c).text(c===!1?"":a._toString(c)),g=g!==f.attr("class"),e.toggleClass(d.classInvalid,!!c).toggleClass(d.classValid,!c),d.animateMessage&&g&&f.hide().fadeIn(d.animateMessageDuration)},c.getMessageNode=function(b){var c,d;return c=this.config(),d=this.$el.find("."+c.classMessage).filter(function(){return a(this).data(c.keyFor)===b.name}),d.length||(d=a("<span>").addClass(c.classMessage).data(c.keyFor,b.name).insertAfter(b)),d},c.serialize=function(){return this.$el.serializeObject()},c.request=function(){this.$el.clone().submit()},c.ajax=function(){var b=this.config();return a.ajax({url:this.$el.prop("action"),type:this.$el.prop("method"),data:{data:b.submitJSON?JSON.stringify(this.serialize()):this.serialize()}})},c._onAction=function(a){var b=a.currentTarget;this.toggleMessage(b,this.validate(b))},c._onSubmit=function(a){var b=this.validateAll(!0);return b&&this.config().submitOnValid?!0:(a.preventDefault(),void this.$el.trigger(b?this.EVENT_SUBMIT:this.EVENT_ERROR))}}(),a.Formmy=b,a.Formmy.instanceName="formmyInstance",a.fn.formmy=function(b,c){var d=a.Formmy.instanceName;return this.each(function(){var e=a(this);e.data(d)||e.data(d,new a.Formmy(this,b,c))}),this},a.fn.getFormmy=function(){return this.data(a.Formmy.instanceName)}}(jQuery,this),function(a){var b={alpha:function(a){return/^[a-zA-Z]*?$/.test(a)},alphaDash:function(a){return/^[\w\-]*?$/.test(a)},alphaNumeric:function(a){return/^[a-zA-Z0-9]*?$/.test(a)},colorHex:function(a){return/^#?[0-9a-f]{3}([0-9a-f]{3})?$/i.test(a)},creditCard:function(a){return/^[13456][\d]{13,15}$/.test(a)},date:function(a,b){return b=b||"^\\d{4}/\\d{1,2}/\\d{1,2}$",this.regex(a,b)},decimal:function(a,b,c){var d,e,f;return d=b?"{"+parseInt(b,10)+"}":"+",e=c?"{"+parseInt(c,10)+"}":"+",f="^[\\d]"+e+"(.[\\d]"+d+")?$",this.regex(a,f)},digit:function(a){return/^\d+$/.test(a)},email:function(b){var c,d,e,f;return c="[a-zA-Z0-9!#\\$%&`\\+\\-\\*\\/â€™\\^\\{\\}_]",d="[a-zA-Z0-9\\-]",e="^%s+(\\.%s+)*?@%s+(\\.%s+)*?$",f=a._format(e,c,c,d,d),this.regex(b,f)},equals:function(a,b){return a===b},exactLength:function(a,b){return a.length===b},matches:function(a,b,c){return a===c[b]},maxLength:function(a,b){return a.length<=b},minLength:function(a,b){return a.length>=b},notEmpty:function(b){return!!a._toString(b)},numeric:function(a){return/^(\-|\+)?\d+(\.\d+)?$/.test(a)},phone:function(b,c,d){return b=a._toString(b).replace(/[^\d]/g,""),c=c||10,d=d||11,this.rangeLength(b,c,d)},length:function(a,b,c){return this.minLength(a,b)&&this.maxLength(a,c)},range:function(a,b,c){return a=new Number(a),a>=b&&c>=a},regex:function(a,b){return b=new RegExp(b),b.test(a)},url:function(b){var c,d,e,f,g;return c="(https|http)://",d="(\\d{1,3}(\\.\\d{1,3}){3})",e="([a-z0-9\\-]+(\\.[a-z0-9\\-]+)*?)",f="(:[\\d]{1,5})",g="[^\\\\'\\|`\\^\"<>\\(\\)\\{\\}\\[\\]]+",this.regex(b,a._format("^%s(%s|%s)(%s)?(%s)?$",c,d,e,f,g))},_call:function(b,c){return a.isFunction(this[b])?this[b].apply(this,c):null},_add:function(b,c,d){return d=d||!1,this.hasOwnProperty(b)&&!d||/^_/.test(b)||!a.isFunction(c)?!1:(this[b]=c,!0)}};a.extend(a.Formmy,{valid:b})}(jQuery),function(a){var b={regex:function(a,b,c){return a.replace(new RegExp(b,"g"),c)},replace:function(a,b,c){return a.split(b).join(c)},trim:function(a){return a.replace(/(^\s+|\s+$)/g,"")},zenhan:function(b){var c,d;return c={han:[49,50,51,52,53,54,55,56,57,48,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,94,92,33,34,35,36,37,38,39,40,41,61,126,124,96,123,43,42,125,60,62,63,95,64,91,59,58,93,44,46,47],zen:[65297,65298,65299,65300,65301,65302,65303,65304,65305,65296,65345,65346,65347,65348,65349,65350,65351,65352,65353,65354,65355,65356,65357,65358,65359,65360,65361,65362,65363,65364,65365,65366,65367,65368,65369,65370,65313,65314,65315,65316,65317,65318,65319,65320,65321,65322,65323,65324,65325,65326,65327,65328,65329,65330,65331,65332,65333,65334,65335,65336,65337,65338,65293,65342,65509,65281,8221,65283,65284,65285,65286,8217,65288,65289,65309,65374,65372,65344,65371,65291,65290,65373,65308,65310,65311,65343,65312,65339,65307,65306,65341,65292,65294,65295]},d=a.map(Array.prototype.slice.call(b),function(b){var d=a.inArray(b.charCodeAt(0),c.zen);return 0>d?b:String.fromCharCode(c.han[d])}),d.join("")}};a.extend(a.Formmy,{filter:b})}(jQuery);